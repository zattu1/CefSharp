<UserControl x:Class="CefSharp.fastBOT.AutoPurchaseControl"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml">

    <UserControl.Resources>
        <!-- ComboBoxのスタイルを明示的に定義してバインディングエラーを完全に回避 -->
        <Style x:Key="FixedComboBoxStyle" TargetType="ComboBox">
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Background" Value="White"/>
            <Setter Property="BorderBrush" Value="Gray"/>
            <Setter Property="BorderThickness" Value="1"/>
            <Setter Property="Padding" Value="6,3"/>
        </Style>

        <Style x:Key="FixedComboBoxItemStyle" TargetType="ComboBoxItem">
            <!-- バインディングエラーを防ぐため、直接値を設定 -->
            <Setter Property="HorizontalContentAlignment" Value="Left"/>
            <Setter Property="VerticalContentAlignment" Value="Center"/>
            <Setter Property="Padding" Value="8,4"/>
            <Setter Property="Background" Value="Transparent"/>
            <Setter Property="BorderThickness" Value="0"/>
            <Setter Property="Template">
                <Setter.Value>
                    <ControlTemplate TargetType="ComboBoxItem">
                        <Border Name="ItemBorder" 
                                Background="{TemplateBinding Background}"
                                BorderBrush="{TemplateBinding BorderBrush}"
                                BorderThickness="{TemplateBinding BorderThickness}"
                                Padding="{TemplateBinding Padding}">
                            <!-- ContentPresenterでバインディングを使わず、直接値を設定 -->
                            <ContentPresenter HorizontalAlignment="Left"
                                              VerticalAlignment="Center"/>
                        </Border>
                        <ControlTemplate.Triggers>
                            <Trigger Property="IsHighlighted" Value="True">
                                <Setter TargetName="ItemBorder" Property="Background" Value="#E3F2FD"/>
                            </Trigger>
                            <Trigger Property="IsSelected" Value="True">
                                <Setter TargetName="ItemBorder" Property="Background" Value="#BBDEFB"/>
                            </Trigger>
                            <Trigger Property="IsEnabled" Value="False">
                                <Setter Property="Foreground" Value="Gray"/>
                            </Trigger>
                        </ControlTemplate.Triggers>
                    </ControlTemplate>
                </Setter.Value>
            </Setter>
        </Style>
    </UserControl.Resources>

    <ScrollViewer VerticalScrollBarVisibility="Auto" HorizontalScrollBarVisibility="Disabled">
        <StackPanel Margin="5">

            <!-- 購入進捗バー -->
            <ProgressBar x:Name="ProgressBar" Maximum="11" Value="0" Height="20" Margin="0,0,0,5"/>

            <!-- アカウント管理 -->
            <GroupBox Header="アカウント管理 (1-10スロット)" Margin="0,5">
                <StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,2">
                        <Label Content="選択:" Width="50"/>
                        <ComboBox x:Name="AccountComboBox" Width="200" Margin="2,0"
                                  Style="{StaticResource FixedComboBoxStyle}"
                                  ItemContainerStyle="{StaticResource FixedComboBoxItemStyle}"/>
                        <TextBlock Text="※選択で即座に切り替わります" 
                                   VerticalAlignment="Center" Margin="10,0" 
                                   Foreground="Gray" FontSize="10"/>
                    </StackPanel>
                    <StackPanel Orientation="Horizontal" Margin="0,2">
                        <Button x:Name="SaveAccountButton" Content="保存" Width="50" Margin="2,0" 
                                Background="LightGreen" ToolTip="現在の入力内容をアカウントに保存"/>
                        <Button x:Name="NewAccountButton" Content="クリア" Width="50" Margin="2,0" 
                                Background="LightYellow" ToolTip="フォームをクリア"/>
                        <Button x:Name="DeleteAccountButton" Content="削除" Width="50" Margin="2,0" 
                                Background="LightCoral" ToolTip="アカウントデータを削除"/>
                    </StackPanel>
                    <TextBlock Text="※ログイン情報、ネットワーク設定、購入者情報、クレジットカード情報が一括管理されます" 
                               Margin="0,5" Foreground="Blue" FontSize="10" TextWrapping="Wrap"/>
                </StackPanel>
            </GroupBox>

            <!-- チケット購入情報 -->
            <GroupBox Header="チケット購入情報" Margin="0,5">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="80"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Label Grid.Row="0" Grid.Column="0" Content="ログインID:"/>
                    <TextBox x:Name="LoginEdit" Grid.Row="0" Grid.Column="1"/>

                    <Label Grid.Row="1" Grid.Column="0" Content="パスワード:"/>
                    <PasswordBox x:Name="PasswordEdit" Grid.Row="1" Grid.Column="1"/>

                    <Button x:Name="LoginButton" Grid.Row="2" Grid.Column="1" 
                            Content="ログイン" HorizontalAlignment="Left" Width="80"/>
                </Grid>
            </GroupBox>

            <!-- ネットワーク設定 -->
            <GroupBox Header="ネットワーク設定" Margin="0,5">
                <StackPanel>
                    <Grid>
                        <Grid.RowDefinitions>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                            <RowDefinition Height="Auto"/>
                        </Grid.RowDefinitions>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="60"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <Label Grid.Row="0" Grid.Column="0" Content="Proxy:"/>
                        <TextBox x:Name="ProxyLineEdit" Grid.Row="0" Grid.Column="1" 
                                 Text="127.0.0.1:8080"/>

                        <CheckBox x:Name="ProxyRotationCheckBox" Grid.Row="1" Grid.ColumnSpan="2" 
                                  Content="Proxyローテーション" Margin="0,3"/>

                        <StackPanel Grid.Row="2" Grid.ColumnSpan="2" Orientation="Horizontal">
                            <RadioButton x:Name="PerRequestRadioButton" Content="毎回" 
                                         IsChecked="True" Margin="5,0"/>
                            <RadioButton x:Name="EverySecondRadioButton" Content="秒毎" 
                                         Margin="5,0"/>
                            <TextBox x:Name="ProxyEverySecondLineEdit" Width="60" 
                                     Text="30" Margin="5,0"/>
                            <Label Content="秒"/>
                        </StackPanel>
                    </Grid>

                    <Button x:Name="ApplyProxyButton" Content="Proxy適用" Margin="0,5"/>
                </StackPanel>
            </GroupBox>

            <!-- 購入者情報 -->
            <GroupBox Header="購入者情報" Margin="0,5">
                <Grid>
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="60"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Label Grid.Row="0" Grid.Column="0" Content="姓名:"/>
                    <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal">
                        <TextBox x:Name="LastNameLineEdit" Width="80" ToolTip="姓"/>
                        <TextBox x:Name="FirstNameLineEdit" Width="80" Margin="5,0,0,0" ToolTip="名"/>
                    </StackPanel>

                    <Label Grid.Row="1" Grid.Column="0" Content="カナ:"/>
                    <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal">
                        <TextBox x:Name="LastKanaLineEdit" Width="80" ToolTip="セイ"/>
                        <TextBox x:Name="FirstKanaLineEdit" Width="80" Margin="5,0,0,0" ToolTip="メイ"/>
                    </StackPanel>

                    <Label Grid.Row="2" Grid.Column="0" Content="TEL:"/>
                    <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal">
                        <TextBox x:Name="Tel1LineEdit" Width="40"/>
                        <Label Content="-"/>
                        <TextBox x:Name="Tel2LineEdit" Width="50"/>
                        <Label Content="-"/>
                        <TextBox x:Name="Tel3LineEdit" Width="50"/>
                    </StackPanel>

                    <Label Grid.Row="3" Grid.Column="0" Content="Email:"/>
                    <TextBox x:Name="EmailLineEdit" Grid.Row="3" Grid.Column="1"/>
                </Grid>
            </GroupBox>

            <!-- クレジットカード -->
            <GroupBox Header="クレジットカード" Margin="0,5">
                <Grid HorizontalAlignment="Left" Width="398">
                    <Grid.RowDefinitions>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                        <RowDefinition Height="Auto"/>
                    </Grid.RowDefinitions>
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="60"/>
                        <ColumnDefinition Width="*"/>
                    </Grid.ColumnDefinitions>

                    <Label Grid.Row="0" Grid.Column="0" Content="番号:"/>
                    <StackPanel Grid.Row="0" Grid.Column="1" Orientation="Horizontal">
                        <TextBox x:Name="CardNumberLineEdit" Width="150"/>
                    </StackPanel>

                    <Label Grid.Row="1" Grid.Column="0" Content="有効期限:"/>
                    <StackPanel Grid.Row="1" Grid.Column="1" Orientation="Horizontal">
                        <ComboBox x:Name="MonthComboBox" Width="50"
                      Style="{StaticResource FixedComboBoxStyle}"
                      ItemContainerStyle="{StaticResource FixedComboBoxItemStyle}"/>
                        <Label Content="月"/>
                        <ComboBox x:Name="YearComboBox" Width="60"
                      Style="{StaticResource FixedComboBoxStyle}"
                      ItemContainerStyle="{StaticResource FixedComboBoxItemStyle}"/>
                        <Label Content="年"/>
                    </StackPanel>

                    <Label Grid.Row="2" Grid.Column="0" Content="CVV:"/>
                    <StackPanel Grid.Row="2" Grid.Column="1" Orientation="Horizontal">
                        <TextBox x:Name="CvvLineEdit" Width="50"/>
                    </StackPanel>

                    <Label Grid.Row="3" Grid.Column="0" Content="名義人:"/>
                    <TextBox x:Name="CardNameLineEdit" Grid.Row="3" Grid.Column="1"/>
                </Grid>
            </GroupBox>

            <!-- チケット選択設定 -->
            <GroupBox Header="チケット選択設定" Margin="0,5">
                <StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <Label Content="対象公演"/>
                        <CheckBox x:Name="AllCheckBox" Content="全て選択/解除" Margin="20,8,0,0"/>
                    </StackPanel>
                    <ListBox x:Name="EventListWidget" Height="120"/>

                    <StackPanel Orientation="Horizontal" Margin="0,5">
                        <Label Content="購入枚数:"/>
                        <ComboBox x:Name="NumComboBox" Width="60"
                                  Style="{StaticResource FixedComboBoxStyle}"
                                  ItemContainerStyle="{StaticResource FixedComboBoxItemStyle}">
                            <ComboBoxItem Content="1"/>
                            <ComboBoxItem Content="2"/>
                        </ComboBox>
                    </StackPanel>
                </StackPanel>
            </GroupBox>

            <!-- 自動購入実行 -->
            <GroupBox Header="自動購入実行" Margin="0,5">
                <StackPanel>
                    <StackPanel Orientation="Horizontal">
                        <Label Content="監視間隔:"/>
                        <TextBox x:Name="IntervalEdit" Width="60" Text="2000"/>
                        <Label Content="msec"/>
                    </StackPanel>

                    <StackPanel Orientation="Horizontal" Margin="0,10">
                        <Button x:Name="StartButton" Content="購入開始" Width="80" 
                                IsEnabled="False" Background="LightGreen"/>
                        <Button x:Name="StopButton" Content="停止" Width="80" 
                                Margin="5,0" Background="LightCoral"/>
                    </StackPanel>
                </StackPanel>
            </GroupBox>

            <!-- システム状態表示 -->
            <GroupBox Header="システム状態" Margin="0,5">
                <StackPanel>
                    <TextBlock x:Name="ProxyStatusText" Text="Proxy: 未設定" Margin="0,2"/>
                    <TextBlock x:Name="AccountStatusText" Text="アカウント: 未選択" Margin="0,2"/>
                    <TextBlock x:Name="HtmlStatusText" Text="解析: 未実行" Margin="0,2"/>
                </StackPanel>
            </GroupBox>
        </StackPanel>
    </ScrollViewer>
</UserControl>