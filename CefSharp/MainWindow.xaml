<Window x:Class="CefSharp.fastBOT.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:cef="clr-namespace:CefSharp.Wpf;assembly=CefSharp.Wpf"
        xmlns:local="clr-namespace:CefSharp.fastBOT"
        Title="fastBOT - チケット自動購入ブラウザ" 
        Height="854" Width="1200"
        WindowStartupLocation="CenterScreen"
        Icon="Resources/fastBOT.ico">

    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="300"/>
        </Grid.ColumnDefinitions>

        <!-- 左側：メインブラウザエリア -->
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="*"/>
            </Grid.RowDefinitions>

            <!-- ブラウザコントロールバー -->
            <Grid Grid.Row="0" Background="LightGray" Margin="2">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="*"/>
                    <ColumnDefinition Width="Auto"/>
                    <ColumnDefinition Width="Auto"/>
                </Grid.ColumnDefinitions>

                <Button x:Name="PrevButton" Grid.Column="0" Content="◀" Width="40" FontSize="18" 
                        ToolTip="戻る" Margin="2"/>
                <Button x:Name="NextButton" Grid.Column="1" Content="▶" Width="40" FontSize="18" 
                        ToolTip="進む" Margin="2"/>
                <Button x:Name="ReloadButton" Grid.Column="2" Content="⟳" Width="40" FontSize="18" 
                        ToolTip="再読込" Margin="2"/>
                <Button x:Name="TopButton" Grid.Column="3" Content="■" Width="40" FontSize="18" 
                        ToolTip="トップ画面へ" Margin="2"/>

                <!-- URL入力エリア -->
                <Border Grid.Column="4" Background="White" CornerRadius="3" Margin="5,2" BorderBrush="Gray" BorderThickness="1">
                    <Grid>
                        <Grid.ColumnDefinitions>
                            <ColumnDefinition Width="Auto"/>
                            <ColumnDefinition Width="*"/>
                        </Grid.ColumnDefinitions>

                        <!-- Favicon表示エリア -->
                        <Image x:Name="AddressFaviconImage" Grid.Column="0" 
                               Width="16" Height="16" 
                               Margin="6,0,4,0" 
                               VerticalAlignment="Center"/>

                        <!-- URL入力ボックス -->
                        <TextBox x:Name="UrlLineEdit" Grid.Column="1" 
                                 BorderThickness="0" 
                                 Background="Transparent"
                                 VerticalAlignment="Center"
                                 Padding="0,3"/>
                    </Grid>
                </Border>

                <Button x:Name="GoButton" Grid.Column="5" Content="移動" Margin="2"/>
                <Button x:Name="NewTabButton" Grid.Column="6" Content="+" Width="30" FontSize="16" 
                        ToolTip="新しいタブ (Ctrl+T)" Margin="5,2,2,2"/>
            </Grid>

            <!-- プログレスバー -->
            <ProgressBar x:Name="WebProgressBar" Grid.Row="1" Height="2" 
                         Background="Transparent" Foreground="#da4453"/>

            <!-- タブコントロール -->
            <TabControl x:Name="TabWidget" Grid.Row="2" Margin="2">
                <!-- タブは動的に追加 -->
                <TabControl.ContextMenu>
                    <ContextMenu>
                        <MenuItem Header="新しいタブ(_N)" InputGestureText="Ctrl+T">
                            <MenuItem.Icon>
                                <TextBlock Text="+" FontWeight="Bold"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator/>
                        <MenuItem Header="タブを閉じる(_C)" InputGestureText="Ctrl+W">
                            <MenuItem.Icon>
                                <TextBlock Text="×" FontWeight="Bold"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Header="他のタブを閉じる(_O)"/>
                        <Separator/>
                        <MenuItem Header="タブを複製(_D)">
                            <MenuItem.Icon>
                                <TextBlock Text="⧉" FontWeight="Bold"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <MenuItem Header="新しいウィンドウで開く(_W)">
                            <MenuItem.Icon>
                                <TextBlock Text="🗔" FontWeight="Bold"/>
                            </MenuItem.Icon>
                        </MenuItem>
                        <Separator/>
                        <MenuItem Header="タブ復元(_R)" InputGestureText="Ctrl+Shift+T" IsEnabled="False">
                            <MenuItem.Icon>
                                <TextBlock Text="↶" FontWeight="Bold"/>
                            </MenuItem.Icon>
                        </MenuItem>
                    </ContextMenu>
                </TabControl.ContextMenu>
            </TabControl>
        </Grid>

        <!-- 右側：自動購入コントロールパネル -->
        <Border Grid.Column="1" Background="LightGray" Margin="2,2,2,2">
            <Grid>
                <Grid.RowDefinitions>
                    <RowDefinition Height="Auto"/>
                    <RowDefinition Height="*"/>
                </Grid.RowDefinitions>

                <!-- ヘッダー -->
                <Border Grid.Row="0" Background="DarkBlue" Padding="5">
                    <TextBlock Text="fastBOT 自動購入システム" 
                               Foreground="White" FontWeight="Bold" FontSize="12" 
                               HorizontalAlignment="Center"/>
                </Border>

                <!-- 自動購入コントロール -->
                <local:AutoPurchaseControl x:Name="AutoPurchaseControlPanel" 
                                          Grid.Row="1" 
                                          Background="White"/>
            </Grid>
        </Border>
    </Grid>
</Window>